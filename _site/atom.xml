<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

 <title>Dev Blog</title>
 <link href="https://ara-house.herokuapp.com/atom.xml" rel="self"/>
 <link href="https://ara-house.herokuapp.com/"/>
 <updated>2016-07-18T01:56:13+09:00</updated>
 <id>https://ara-house.herokuapp.com</id>
 <author>
   <name>SG Lee</name>
   <email></email>
 </author>

 
 <entry>
   <title>EXIF 옵션에 따라 이미지 회전시키기</title>
   <link href="https://ara-house.herokuapp.com/2016/07/18/rotate-image/"/>
   <updated>2016-07-18T00:00:00+09:00</updated>
   <id>https://ara-house.herokuapp.com/2016/07/18/rotate-image</id>
   <content type="html">&lt;p&gt;모바일에서 세로로 찍은 사진을 &lt;a href=&quot;https://ara-house.herokuapp.com&quot;&gt;ara house&lt;/a&gt;에 올리니, 데스크탑에서 제대로 보이지 않았다.
모바일에서는 브라우저가 자동으로 이미지를 회전시켜주지만, 데스크탑에서는 그렇지 않은가보다.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.railstutorial.org/&quot;&gt;rails tutorial&lt;/a&gt;를 충실히 따라한 ara house는 이미지 작업을 &lt;code&gt;Carrierwave gem&lt;/code&gt;을 이용해서 구현했다.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;PictureUploader&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;CarrierWave&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Uploader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;
  &lt;span class=&quot;kp&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;CarrierWave&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;MiniMagick&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
  &lt;span class=&quot;nf&quot;&gt;process&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:auto_orient&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;auto_orient&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;manipulate!&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:auto_orient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;code&gt;process&lt;/code&gt;를 이용해서 이미지가 업로드 될 때 callback method를 걸어둘 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;manipulate!&lt;/code&gt;는 이미지 프로세싱에 사용하는 MiniMagick command를 사용할 수 있게 해준다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;image.tap(&amp;amp;:auto_orient)&lt;/code&gt;는 MiniMagick의 &lt;code&gt;-auto_orient&lt;/code&gt; command을 실행시킨다. 이 command가 EXIF에 따라서 적절히 이미지를 회전시켜주는 고마운 아이이다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;.tap&lt;/code&gt;은 object를 단순히 block으로 넘기고, 결과값을 다시 return해주는 method이다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;def auto_orient&lt;/code&gt;를 아래와 같이 module에 method를 추가하는 형태로 하고 싶었는데, 파일을 어디에 둬야될지 몰라서 &lt;code&gt;PictureUploader&lt;/code&gt;에 넣어뒀다.&lt;/p&gt;

&lt;p&gt;아는 분 계시면 좀 알려주세요.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;CarrierWave&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;MiniMagick&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;auto_orient&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;manipulate!&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:auto_orient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;hr&gt;

&lt;p&gt;&lt;small&gt;참고링크&lt;/small&gt;&lt;/p&gt;

&lt;p&gt;&lt;small&gt;&lt;a href=&quot;http://www.imagemagick.org/script/command-line-options.php#auto-orient&quot;&gt;MiniMagick auto_orient method&lt;/a&gt;&lt;/small&gt;&lt;/p&gt;

&lt;p&gt;&lt;small&gt;&lt;a href=&quot;https://gist.github.com/tanraya/7438337&quot;&gt;Carrierwave auto_orient&lt;/a&gt;&lt;/small&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Build Your Jekyll</title>
   <link href="https://ara-house.herokuapp.com/2016/07/18/build-your-jekyll/"/>
   <updated>2016-07-18T00:00:00+09:00</updated>
   <id>https://ara-house.herokuapp.com/2016/07/18/build-your-jekyll</id>
   <content type="html"></content>
 </entry>
 

</feed>
